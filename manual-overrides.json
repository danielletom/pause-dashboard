{
  "totalSpecScreens": 47,
  "features": [
    {
      "name": "Morning & Evening Check-in",
      "status": "connected",
      "screens": ["quick-log.tsx"],
      "endpoints": ["/api/logs POST", "/api/logs GET", "/api/profile GET", "/api/meds GET", "/api/meds/logs GET"],
      "notes": "5-step AM + 5-step PM flow. Error handling, double-submit guard, disruptions field fixed. Evening symptomsJson now consistently Record<string,number>. Meds step UI built but not wired into step flow"
    },
    {
      "name": "Detailed Symptom Log",
      "status": "connected",
      "screens": ["log.tsx"],
      "endpoints": ["/api/logs POST"],
      "notes": "5-step wizard with Alert error handling, double-submit guard, state reset on revisit. logType='symptom' logs may not show in homescreen/journal"
    },
    {
      "name": "Home Dashboard",
      "status": "connected",
      "screens": ["index.tsx"],
      "endpoints": ["/api/logs GET", "/api/meds GET", "/api/meds/logs GET", "/api/articles GET", "/api/insights/home GET"],
      "notes": "Readiness score, 7-day strip, smart CTA. Streak deduplicates by date. Handles legacy symptomsJson object values. Sleep edit creates new entry (no PATCH/PUT)"
    },
    {
      "name": "Insights & Patterns",
      "status": "connected",
      "screens": ["insights.tsx", "symptom-detail.tsx"],
      "endpoints": ["/api/logs GET", "/api/insights/correlations GET", "/api/insights/benchmarks GET"],
      "notes": "Pattern detection, correlations, benchmarks. Morning/evening completion tracking. Doctor card removed"
    },
    {
      "name": "Journal",
      "status": "connected",
      "screens": ["journal.tsx"],
      "endpoints": ["/api/logs GET", "/api/insights/home GET"],
      "notes": "Week overview, streak counts AM+PM, evening available at 7PM refreshes on focus. Links to calendar and symptom log"
    },
    {
      "name": "Medications",
      "status": "connected",
      "screens": ["meds.tsx"],
      "endpoints": ["/api/meds GET", "/api/meds POST", "/api/meds/[id]/log POST", "/api/meds/logs GET"],
      "notes": "Add/edit meds, daily tracking. Custom time/frequency, clearable type, SMS phone field. Missing: edit/delete existing meds, smsPhone not sent to API, labs upload no-op"
    },
    {
      "name": "SOS Breathing",
      "status": "connected",
      "screens": ["sos.tsx"],
      "endpoints": ["/api/sos POST", "/api/sos GET"],
      "notes": "Animated breathing exercise. Reusable (state resets). Hot flash logs to /api/logs. Missing: no state reset via back gesture"
    },
    {
      "name": "Calendar View",
      "status": "connected",
      "screens": ["calendar.tsx"],
      "endpoints": ["/api/logs GET"],
      "notes": "Month view with AM/PM dots. symptomsJson count fixed (was Array.isArray, now Object.keys). Missing: only fetches 45 days but allows unlimited month nav"
    },
    {
      "name": "Learn / Articles",
      "status": "connected",
      "screens": ["learn.tsx", "article.tsx"],
      "endpoints": ["/api/articles GET", "/api/articles/[id] GET"],
      "notes": "Article list + reader. Emoji placeholders for thumbnails"
    },
    {
      "name": "Profile & Settings",
      "status": "connected",
      "screens": ["profile.tsx", "edit-profile.tsx", "about-me.tsx"],
      "endpoints": ["/api/profile GET", "/api/profile POST"],
      "notes": "View/edit profile. Missing: delete account doesn't purge backend data, subscription buttons are no-ops, about-me fields don't match Profile type, stage value domain mismatch with onboarding"
    },
    {
      "name": "Authentication",
      "status": "complete",
      "screens": ["sign-in.tsx", "sign-up.tsx", "welcome.tsx"],
      "endpoints": [],
      "notes": "Clerk auth with email + Apple Sign-In"
    },
    {
      "name": "Onboarding",
      "status": "complete",
      "screens": ["about-you.tsx", "stage.tsx", "val-stage.tsx", "symptoms.tsx", "val-symptoms.tsx", "goals.tsx", "quiz-intro.tsx", "quiz-q1.tsx", "quiz-q2.tsx", "quiz-q3.tsx", "quiz-results.tsx", "notif-setup.tsx", "done.tsx"],
      "endpoints": ["/api/profile POST"],
      "notes": "12 onboarding screens, saves profile at completion"
    },
    {
      "name": "Export Data",
      "status": "ui-only",
      "screens": ["export-data.tsx"],
      "endpoints": [],
      "notes": "UI built with PDF/CSV options. No actual export generation backend"
    },
    {
      "name": "Legal Pages",
      "status": "ui-only",
      "screens": ["legal.tsx", "terms.tsx", "privacy.tsx"],
      "endpoints": [],
      "notes": "Static content. Medical Disclaimer & SMS Terms routes are null"
    },
    {
      "name": "Help & Feedback",
      "status": "ui-only",
      "screens": ["help-feedback.tsx"],
      "endpoints": [],
      "notes": "FAQ and feedback form UI, no submission backend"
    },
    {
      "name": "Paywall / Subscriptions",
      "status": "partial",
      "screens": [],
      "endpoints": ["/api/subscription GET", "/api/webhooks/revenuecat POST"],
      "notes": "Backend has RevenueCat webhook + subscription check. No paywall screen in app. Profile subscription buttons are no-ops"
    },
    {
      "name": "Push Notifications",
      "status": "partial",
      "screens": [],
      "endpoints": ["/api/push-token GET", "/api/push-token POST", "/api/cron/notifications GET"],
      "notes": "Token registration + cron job work. No user-facing settings screen"
    },
    {
      "name": "Wearables / Health Sync",
      "status": "not-started",
      "screens": [],
      "endpoints": [],
      "notes": "DB schema exists (healthData table). No endpoints, no screen"
    },
    {
      "name": "Report Builder",
      "status": "not-started",
      "screens": [],
      "endpoints": [],
      "notes": "In wireframe spec. No screen, no endpoint"
    },
    {
      "name": "QR Code Funnel",
      "status": "not-started",
      "screens": [],
      "endpoints": [],
      "notes": "Wireframe spec has 6 screens. Not started"
    },
    {
      "name": "Custom Tracking",
      "status": "not-started",
      "screens": [],
      "endpoints": [],
      "notes": "DB has customSymptoms field in profiles. No dedicated screen. Custom symptoms can be added during check-in flow"
    },
    {
      "name": "Programs / Lessons",
      "status": "not-started",
      "screens": [],
      "endpoints": [],
      "notes": "DB has programProgress table. No endpoints, no screens"
    }
  ],
  "uxChecklist": [
    { "name": "Stone color palette", "done": true },
    { "name": "AnimatedPressable haptics", "done": true },
    { "name": "Custom FAB log button", "done": true },
    { "name": "Empty states", "done": true },
    { "name": "Loading states", "done": true },
    { "name": "Step-by-step wizard pattern", "done": true },
    { "name": "Error feedback (Alert on save failures)", "done": true },
    { "name": "Double-submit prevention", "done": true },
    { "name": "State reset on screen revisit", "done": true },
    { "name": "Design system / component library", "done": false },
    { "name": "Custom typography (beyond SpaceMono)", "done": false },
    { "name": "Real thumbnail images (not emoji)", "done": false },
    { "name": "Loading skeletons", "done": false },
    { "name": "Dark mode support", "done": false },
    { "name": "App store marketing assets", "done": false }
  ],
  "aiSystems": [
    { "name": "Readiness scoring algorithm", "done": true },
    { "name": "Correlation engine (lag analysis)", "done": true },
    { "name": "Benchmark aggregation (cohorts)", "done": true },
    { "name": "AI narrative generation (Claude)", "done": true },
    { "name": "Narratives enabled in production", "done": false }
  ],
  "infraChecklist": [
    { "name": "Vercel deployment (API)", "done": true },
    { "name": "Vercel cron jobs (5 scheduled)", "done": true },
    { "name": "Clerk auth (both repos)", "done": true },
    { "name": "RevenueCat webhook", "done": true },
    { "name": "CI/CD pipeline (GitHub Actions)", "done": false },
    { "name": "Test suite (app)", "done": false },
    { "name": "Test suite (API)", "done": false },
    { "name": "Input validation (Zod schemas)", "done": false },
    { "name": "Rate limiting", "done": false },
    { "name": "Error monitoring (Sentry etc.)", "done": false },
    { "name": "API documentation", "done": false },
    { "name": "Account deletion backend purge", "done": false },
    { "name": "API PUT/PATCH for updates (sleep edit, profile)", "done": false }
  ],
  "completenessGaps": [
    "Quick-log meds step (renderMedsStep) is defined but never wired into step flow — med logs never submitted from check-in",
    "Sleep 'Edit' on homescreen creates new entry instead of updating existing (needs PUT/PATCH endpoint)",
    "Calendar only fetches 45 days but allows unlimited month navigation — older months show empty",
    "Profile delete account only deletes Clerk user, doesn't purge backend data (logs, meds, profile)",
    "about-me.tsx profile fields (height, weight, etc.) don't exist in Profile type — form never populates",
    "Stage value domain mismatch: about-me uses full strings ('Perimenopause'), onboarding uses short keys ('peri')",
    "smsPhone and smsReminder state in meds.tsx never sent to API on save",
    "Labs upload buttons in meds.tsx are no-ops",
    "Profile subscription buttons are no-ops (needs paywall screen)",
    "logType='symptom' entries from detailed log screen may be invisible in homescreen/journal UI",
    "No edit/delete for existing medications in meds.tsx",
    "Export Data page has no backend — PDF/CSV generation not implemented",
    "Help & Feedback form has no submission backend",
    "Medical Disclaimer and SMS Terms legal routes are null"
  ]
}
